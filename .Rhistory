pie(as.numeric(pie$Fed), labels = paste0(pie$recipient_name, "\n" , round(pie$Fed/sum(pie$Fed), digits=2), "%"), main = "Main Agencies of Fed $ in Rochester", cex= .7, col=col)
pie(as.numeric(pie$Fed), labels = paste0(pie$agency_name, "\n" , round(pie$Fed/sum(pie$Fed), digits=2), "%"), main = "Main Agencies of Fed $ in Rochester", cex= .7, col=col)
pro <- group_by(roc16, cfda_program_title)
pro <- arrange(as.data.frame(summarize(rec, Fed = sum(fed_funding_amount), Freq = n())), desc(Fed))
dat <- pro
pie <- dat[1:5,]
pie[6,] <- c("OTHERS", sum(dat$Fed[6:length(dat$Fed)]), sum(dat$Freq[8:length(dat$Fed)]))
dat <- pro
dat
pro <- group_by(roc16, cfda_program_title)
pro <- arrange(as.data.frame(summarize(rec, Fed = sum(fed_funding_amount), Freq = n())), desc(Fed))
pro <- group_by(roc16, cfda_program_title)
pro <- arrange(as.data.frame(summarize(rec, Fed = sum(fed_funding_amount), Freq = n())), desc(Fed))
dat <- group_by(roc16, cfda_program_title)
dat <- arrange(as.data.frame(summarize(dat, Fed = sum(fed_funding_amount), Freq = n())), desc(Fed))
dat <- group_by(roc16, cfda_program_title)
dat <- arrange(as.data.frame(summarize(dat, Fed = sum(fed_funding_amount), Freq = n())), desc(Fed))
pie <- dat[1:5,]
pie[6,] <- c("OTHERS", sum(dat$Fed[6:length(dat$Fed)]), sum(dat$Freq[8:length(dat$Fed)]))
pie$Fed <- as.numeric(pie$Fed)
pie <- arrange(pie, desc(Fed))
pie.roc.pro <- pie
par(mfrow=c(1,1))
pie(as.numeric(pie$Fed), labels = paste0(pie$cfda_program_title, "\n" , round(pie$Fed/sum(pie$Fed), digits=2), "%"), main = "Main Agencies of Fed $ in Rochester", cex= .7, col=col)
pie(as.numeric(pie$Fed), labels = paste0(pie$agency_name, "\n" , round(pie$Fed/sum(pie$Fed)*100, digits=1), "%"), main = "Main Agencies of Fed $ in Rochester", cex= .7, col=col)
dat <- group_by(roc16, cfda_program_title)
dat <- arrange(as.data.frame(summarize(dat, Fed = sum(fed_funding_amount), Freq = n())), desc(Fed))
pie <- dat[1:5,]
pie[6,] <- c("OTHERS", sum(dat$Fed[6:length(dat$Fed)]), sum(dat$Freq[8:length(dat$Fed)]))
pie$Fed <- as.numeric(pie$Fed)
pie <- arrange(pie, desc(Fed))
pie.roc.pro <- pie
par(mfrow=c(1,1))
pie(as.numeric(pie$Fed), labels = paste0(pie$cfda_program_title, "\n" , round(pie$Fed/sum(pie$Fed)*100, digits=1), "%"), main = "Main Agencies of Fed $ in Rochester", cex= .7, col=col)
dat <- group_by(roc16, agency_name)
dat <- arrange(as.data.frame(summarize(dat, Fed = sum(fed_funding_amount), Freq = n())), desc(Fed))
#pie chart only 5 mayor recipients
pie <- dat[1:5,]
pie[6,] <- c("OTHERS", sum(dat$Fed[6:length(dat$Fed)]), sum(dat$Freq[6:length(dat$Fed)]))
pie$Fed <- as.numeric(pie$Fed)
pie <- arrange(pie, desc(Fed))
pie.roc.age <- pie
par(mfrow=c(1,1))
pie(as.numeric(pie$Fed), labels = paste0(pie$agency_name, "\n" , round(pie$Fed/sum(pie$Fed)*100, digits=1), "%"), main = "Main Agencies of Fed $ in Rochester", cex= .7, col=col)
par(mfrow=c(1,2))
pie <- pie.roc.age
par(mfrow=c(1,1))
par(mfrow=c(1,2))
pie <- pie.roc.age
pie(as.numeric(pie$Fed), labels = paste0(pie$agency_name, "\n" , round(pie$Fed/sum(pie$Fed)*100, digits=1), "%"), main = "Main Agencies of Fed $ in Rochester", cex= .7, col=col)
pie <- pie.roc.pro
par(mfrow=c(1,1))
pie(as.numeric(pie$Fed), labels = paste0(pie$cfda_program_title, "\n" , round(pie$Fed/sum(pie$Fed)*100, digits=1), "%"), main = "Main Programs of Fed $ in Rochester", cex= .7, col=col)
par(mfrow=c(1,2))
pie <- pie.roc.age
pie(as.numeric(pie$Fed), labels = paste0(pie$agency_name, "\n" , round(pie$Fed/sum(pie$Fed)*100, digits=1), "%"), main = "Main Agencies of Fed $ in Rochester", cex= .7, col=col)
pie <- pie.roc.pro
pie(as.numeric(pie$Fed), labels = paste0(pie$cfda_program_title, "\n" , round(pie$Fed/sum(pie$Fed)*100, digits=1), "%"), main = "Main Programs of Fed $ in Rochester", cex= .7, col=col)
par(mfrow=c(2,1))
pie <- pie.roc.age
pie(as.numeric(pie$Fed), labels = paste0(pie$agency_name, "\n" , round(pie$Fed/sum(pie$Fed)*100, digits=1), "%"), main = "Main Agencies of Fed $ in Rochester", cex= .7, col=col)
pie <- pie.roc.pro
pie(as.numeric(pie$Fed), labels = paste0(pie$cfda_program_title, "\n" , round(pie$Fed/sum(pie$Fed)*100, digits=1), "%"), main = "Main Programs of Fed $ in Rochester", cex= .7, col=col)
par(mfrow=c(2,1), mar=c(0,0,3,0))
pie <- pie.roc.age
pie(as.numeric(pie$Fed), labels = paste0(pie$agency_name, "\n" , round(pie$Fed/sum(pie$Fed)*100, digits=1), "%"), main = "Main Agencies of Fed $ in Rochester", cex= .7, col=col)
pie <- pie.roc.pro
pie(as.numeric(pie$Fed), labels = paste0(pie$cfda_program_title, "\n" , round(pie$Fed/sum(pie$Fed)*100, digits=1), "%"), main = "Main Programs of Fed $ in Rochester", cex= .7, col=col)
head(rec) %>% pander
par(mar = c(6,6,3,3))
barplot(rec$Fed/1000000, names.arg = rec$recipient_name, las = 2, cex.names = .7, cex.axis = .7 , ylab = "in USD 1MLL", cex.lab = .8)
#Main recipients at syr
options(scipen = 999)
rec <- group_by(syr16, recipient_name)
rec <- arrange(as.data.frame(summarize(rec, Fed = sum(fed_funding_amount), Freq = n())), desc(Fed))
#removing negatives
x <- rec$Fed < 0
rec$Fed[x] <- 0
rec <- arrange(rec, desc(Fed))
#printing head
head(rec) %>% pander
#barplot
par(mar = c(6,6,3,3))
barplot(rec$Fed/1000000, names.arg = rec$recipient_name, las = 2, cex.names = .7, cex.axis = .7 , ylab = "in USD 1MLL", cex.lab = .8)
#Main recipients at syr
options(scipen = 999)
rec <- group_by(syr16, recipient_name)
rec <- arrange(as.data.frame(summarize(rec, Fed = sum(fed_funding_amount), Freq = n())), desc(Fed))
#removing negatives
x <- rec$Fed < 0
rec$Fed[x] <- 0
rec <- arrange(rec, desc(Fed))
#printing head
head(rec) %>% pander
#barplot
par(mar = c(6,6,3,3), mfrow=(1,1))
barplot(rec$Fed/1000000, names.arg = rec$recipient_name, las = 2, cex.names = .7, cex.axis = .7 , ylab = "in USD 1MLL", cex.lab = .8)
#Main recipients at syr
options(scipen = 999)
rec <- group_by(syr16, recipient_name)
rec <- arrange(as.data.frame(summarize(rec, Fed = sum(fed_funding_amount), Freq = n())), desc(Fed))
#removing negatives
x <- rec$Fed < 0
rec$Fed[x] <- 0
rec <- arrange(rec, desc(Fed))
#printing head
head(rec) %>% pander
#barplot
par(mar = c(6,6,3,3), mfrow=c(1,1))
barplot(rec$Fed/1000000, names.arg = rec$recipient_name, las = 2, cex.names = .7, cex.axis = .7 , ylab = "in USD 1MLL", cex.lab = .8)
#Subsetting Rochester
x <- gra16$recipient_city_name %in% c("Rochester", "ROCHESTER")
roc16 <- gra16[x,c("maj_agency_cat", "agency_name",
"cfda_program_num", "cfda_program_title", "fed_funding_amount", "non_fed_funding_amount",
"total_funding_amount",	"asst_cat_type", "assistance_type", "record_type",
"fiscal_year", "principal_place_cc", "project_description", "recipient_name",
"recipient_type", "recip_cat_type", "recipient_city_name", "recipient_county_name",
"recipient_state_code", "exec1_fullname", "exec1_amount")]
#Only interested in pure Federal grants
x <- roc16$non_fed_funding_amount == 0
roc16 <- roc16[x,]
#only interested in project grants
x <- roc16$assistance_type == "04: Project grant"
roc16 <- roc16[x,]
rec <- group_by(roc16, recipient_name)
rec <- arrange(as.data.frame(summarize(rec, Fed = sum(fed_funding_amount), Freq = n())), desc(Fed))
#removing negatives
x <- rec$Fed < 0
rec$Fed[x] <- 0
rec <- arrange(rec, desc(Fed))
#printing head
head(rec) %>% pander
#barplot
par(mar = c(7,6,3,3), mfrow=c(1,1))
barplot(rec$Fed/1000000, names.arg = rec$recipient_name, las = 2, cex.names = .7, cex.axis = .7 , ylab = "in USD 1MLL", cex.lab = .8)
pie(as.numeric(pie$Fed), labels = paste0(pie$recipient_name, "\n" , round(pie$Fed/sum(pie.syr$Fed)*100, digits=1), "%"), main = "Main Recipients of Fed $ in Syracuse", cex= .7, col=col)
pie<- pie.roc.rec
pie(as.numeric(pie$Fed), labels = paste0(pie$recipient_name, "\n" , round(pie$Fed/sum(pie.roc$Fed)*100, digits=1), "%"), main = "Main Recipients of Fed $ in Rochester", cex= .7, col=col)
col <- c("#4979FF", "#FF9858",  "#8DFFFF", "#FF84FF", "#55D473", "#FFFF78")
plot.new()
par(mfrow = c(1,2), mar=c(0,0,3,0))
pie<- pie.syr.rec
pie(as.numeric(pie$Fed), labels = paste0(pie$recipient_name, "\n" , round(pie$Fed/sum(pie.syr$Fed)*100, digits=1), "%"), main = "Main Recipients of Fed $ in Syracuse", cex= .7, col=col)
pie<- pie.roc.rec
pie(as.numeric(pie$Fed), labels = paste0(pie$recipient_name, "\n" , round(pie$Fed/sum(pie.roc$Fed)*100, digits=1), "%"), main = "Main Recipients of Fed $ in Rochester", cex= .7, col=col)
#Subsetting sry16
x <- gra16$recipient_city_name %in% c("Syracuse", "SYRACUSE")
syr16 <- gra16[x,c("maj_agency_cat", "agency_name",
"cfda_program_num", "cfda_program_title", "fed_funding_amount", "non_fed_funding_amount",
"total_funding_amount",	"asst_cat_type", "assistance_type", "record_type",
"fiscal_year", "principal_place_cc", "project_description", "recipient_name",
"recipient_type", "recip_cat_type", "recipient_city_name", "recipient_county_name",
"recipient_state_code", "exec1_fullname", "exec1_amount")]
#exploring
#what type of assistances are they getting?
#unique(syr16$asst_cat_type)
#[1] "G"
#unique(syr16$assistance_type)
#[1] "04: Project grant"         "03: Formula grant"         "05: Cooperative agreement"
#ass <- group_by(syr16, assistance_type)
#ass <- arrange(as.data.frame(summarize(ass, Freq = n())), desc(Freq))
#            assistance_type Freq
#1         04: Project grant  208
#2 05: Cooperative agreement   34
#3         03: Formula grant    4
#Only interested in pure Federal grants
x <- syr16$non_fed_funding_amount == 0
syr16 <- syr16[x,]
#only interested in project grants
x <- syr16$assistance_type == "04: Project grant"
syr16 <- syr16[x,]
#Main recipients at syr
options(scipen = 999)
rec <- group_by(syr16, recipient_name)
rec <- arrange(as.data.frame(summarize(rec, Fed = sum(fed_funding_amount), Freq = n())), desc(Fed))
#removing negatives
x <- rec$Fed < 0
rec$Fed[x] <- 0
rec <- arrange(rec, desc(Fed))
#printing head
head(rec) %>% pander
#barplot
par(mar = c(7,6,3,3), mfrow=c(1,1))
barplot(rec$Fed/1000000, names.arg = rec$recipient_name, las = 2, cex.names = .7, cex.axis = .7 , ylab = "in USD 1MLL", cex.lab = .8)
#creating an object for a pie charts for the 5 mayor recipients
pie <- rec[1:5,]
pie[6,] <- c("OTHERS", sum(rec$Fed[6:length(rec$Fed)]), sum(rec$Freq[6:length(rec$Fed)]))
pie$Fed <- as.numeric(pie$Fed)
pie <- arrange(pie, desc(Fed))
pie.syr.rec <- pie
#Subsetting Rochester
x <- gra16$recipient_city_name %in% c("Rochester", "ROCHESTER")
roc16 <- gra16[x,c("maj_agency_cat", "agency_name",
"cfda_program_num", "cfda_program_title", "fed_funding_amount", "non_fed_funding_amount",
"total_funding_amount",	"asst_cat_type", "assistance_type", "record_type",
"fiscal_year", "principal_place_cc", "project_description", "recipient_name",
"recipient_type", "recip_cat_type", "recipient_city_name", "recipient_county_name",
"recipient_state_code", "exec1_fullname", "exec1_amount")]
#Only interested in pure Federal grants
x <- roc16$non_fed_funding_amount == 0
roc16 <- roc16[x,]
#only interested in project grants
x <- roc16$assistance_type == "04: Project grant"
roc16 <- roc16[x,]
x <- gra16$recipient_city_name %in% c("Syracuse", "SYRACUSE")
syr16 <- gra16[x,c("maj_agency_cat", "agency_name", "action_type",
"cfda_program_num", "cfda_program_title", "fed_funding_amount", "non_fed_funding_amount",
"total_funding_amount",	"asst_cat_type", "assistance_type", "record_type",
"fiscal_year", "principal_place_cc", "project_description", "recipient_name",
"recipient_type", "recip_cat_type", "recipient_city_name", "recipient_county_name",
"recipient_state_code", "exec1_fullname", "exec1_amount")]
unique(syr16$action_type)
unique(syr16$action_type)
class(syr16$action_type)
unique(syr16$action_type)
gra16$agency_name
gra16$cfda_program_num
table(gra16$cfda_program_num)
arrange(as.data.frame(table(gra16$cfda_program_title)), desc(Freq))
head(arrange(as.data.frame(table(gra16$cfda_program_title)), desc(Freq)))
x <- gra16$cfda_program_title == "Highway Planning and Construction"
dat <- gra16[x,]
head(arrange(as.data.frame(table(gra16$action_type)), desc(Freq)))
View(dat)
unique(gra16$action_type)
dat$act_typ <- substr(dat$action_type, 1, 2)
dat$act_typ
dat$act_typ <- substr(dat$action_type, 1, 1)
dat$act_typ
unique(gra16$action_type)
unique(gra16$action_type)
dat <- gra16[x,]
dat$act_typ <- substr(dat$action_type, 1, 1)
head(arrange(as.data.frame(table(gra16$action_type)), desc(Freq)))
head(arrange(as.data.frame(table(dat$act_typ)), desc(Freq)))
dat <- group_by(syr16, agency_name)
dat <- arrange(as.data.frame(summarize(dat, Fed = sum(fed_funding_amount), Freq = n())), desc(Fed))
pie <- dat[1:5,]
pie[6,] <- c("OTHERS", sum(dat$Fed[6:length(dat$Fed)]), sum(dat$Freq[6:length(dat$Fed)]))
pie$Fed <- as.numeric(pie$Fed)
pie <- arrange(pie, desc(Fed))
pie.syr.age <- pie
dat <- group_by(roc16, cfda_program_title)
dat <- arrange(as.data.frame(summarize(dat, Fed = sum(fed_funding_amount), Freq = n())), desc(Fed))
pie <- dat[1:10,]
pie[11,] <- c("OTHERS", sum(dat$Fed[11:length(dat$Fed)]), sum(dat$Freq[11:length(dat$Fed)]))
pie$Fed <- as.numeric(pie$Fed)
pie <- arrange(pie, desc(Fed))
pie.syr.pro <- pie
par(mfrow=c(2,1), mar=c(0,0,3,0))
pie <- pie.syr.age
pie(as.numeric(pie$Fed), labels = paste0(pie$agency_name, "\n" , round(pie$Fed/sum(pie$Fed)*100, digits=1), "%"), main = "Main Agencies of Fed $ in Rochester", cex= .7, col=col)
pie <- pie.syr.pro
pie(as.numeric(pie$Fed), labels = paste0(pie$cfda_program_title, "\n" , round(pie$Fed/sum(pie$Fed)*100, digits=1), "%"), main = "Main Programs of Fed $ in Rochester", cex= .7, col=col)
par(mfrow=c(2,1), mar=c(0,0,3,0))
pie <- pie.syr.age
pie(as.numeric(pie$Fed), labels = paste0(pie$agency_name, "\n" , round(pie$Fed/sum(pie$Fed)*100, digits=1), "%"), main = "Main Agencies of Fed $ in Syracuse", cex= .7, col=col)
pie <- pie.syr.pro
pie(as.numeric(pie$Fed), labels = paste0(pie$cfda_program_title, "\n" , round(pie$Fed/sum(pie$Fed)*100, digits=1), "%"), main = "Main Programs of Fed $ in Syracuse", cex= .7, col=col)
par(mfrow=c(2,2), mar=c(0,0,3,0))
pie <- pie.syr.age
pie(as.numeric(pie$Fed), labels = paste0(pie$agency_name, "\n" , round(pie$Fed/sum(pie$Fed)*100, digits=1), "%"), main = "Main Agencies of Fed $ in Syracuse", cex= .7, col=col)
pie <- pie.syr.pro
pie(as.numeric(pie$Fed), labels = paste0(pie$cfda_program_title, "\n" , round(pie$Fed/sum(pie$Fed)*100, digits=1), "%"), main = "Main Programs of Fed $ in Syracuse", cex= .7, col=col)
pie <- pie.roc.age
pie(as.numeric(pie$Fed), labels = paste0(pie$agency_name, "\n" , round(pie$Fed/sum(pie$Fed)*100, digits=1), "%"), main = "Main Agencies of Fed $ in Syracuse", cex= .7, col=col)
pie <- pie.roc.pro
pie(as.numeric(pie$Fed), labels = paste0(pie$cfda_program_title, "\n" , round(pie$Fed/sum(pie$Fed)*100, digits=1), "%"), main = "Main Programs of Fed $ in Syracuse", cex= .7, col=col)
#all four
par(mfrow=c(2,2), mar=c(0,0,3,0))
pie <- pie.syr.age
pie(as.numeric(pie$Fed), labels = paste0(pie$agency_name, "\n" , round(pie$Fed/sum(pie$Fed)*100, digits=1), "%"), main = "Main Agencies of Fed $ in Syracuse", cex= .7, col=col)
pie <- pie.syr.pro
pie(as.numeric(pie$Fed), labels = paste0(pie$cfda_program_title, "\n" , round(pie$Fed/sum(pie$Fed)*100, digits=1), "%"), main = "Main Programs of Fed $ in Syracuse", cex= .7, col=col)
pie <- pie.roc.age
pie(as.numeric(pie$Fed), labels = paste0(pie$agency_name, "\n" , round(pie$Fed/sum(pie$Fed)*100, digits=1), "%"), main = "Main Agencies of Fed $ in Rochester", cex= .7, col=col)
pie <- pie.roc.pro
pie(as.numeric(pie$Fed), labels = paste0(pie$cfda_program_title, "\n" , round(pie$Fed/sum(pie$Fed)*100, digits=1), "%"), main = "Main Programs of Fed $ in Rochester", cex= .7, col=col)
#Main programs
dat <- group_by(roc16, cfda_program_title)
dat <- arrange(as.data.frame(summarize(dat, Fed = sum(fed_funding_amount), Freq = n())), desc(Fed))
pie <- dat[1:10,]
pie[11,] <- c("OTHERS", sum(dat$Fed[11:length(dat$Fed)]), sum(dat$Freq[11:length(dat$Fed)]))
pie$Fed <- as.numeric(pie$Fed)
pie <- arrange(pie, desc(Fed))
pie.roc.pro <- pie
pie(as.numeric(pie$Fed), labels = paste0(pie$cfda_program_title, "\n" , round(pie$Fed/sum(pie$Fed)*100, digits=1), "%"), main = "Top 10 Programs of Fed $ in Rochester", cex= .7, col=col)
#Main programs
dat <- group_by(roc16, cfda_program_title)
dat <- arrange(as.data.frame(summarize(dat, Fed = sum(fed_funding_amount), Freq = n())), desc(Fed))
pie <- dat[1:10,]
pie[11,] <- c("OTHERS", sum(dat$Fed[11:length(dat$Fed)]), sum(dat$Freq[11:length(dat$Fed)]))
pie$Fed <- as.numeric(pie$Fed)
pie <- arrange(pie, desc(Fed))
pie.syr.pro <- pie
pie <- pie.syr.pro
pie(as.numeric(pie$Fed), labels = paste0(pie$cfda_program_title, "\n" , round(pie$Fed/sum(pie$Fed)*100, digits=1), "%"), main = "Top 10 Programs of Fed $ in Syracuse", cex= .7, col=col)
pie <- pie.syr.pro
pie(as.numeric(pie$Fed), labels = paste0(pie$cfda_program_title, "\n" , round(pie$Fed/sum(pie$Fed)*100, digits=1), "%"), main = "Top 10 Programs of Fed $ in Syracuse", cex= .7, col=col)
dim(gra16)
unique(syr16$agency_name)
unique(roc16$agency_name)
#Subsetting for Albany
x <- gra16$recipient_city_name %in% c("Albany", "ALBANY")
dat <- gra16[x,c("maj_agency_cat", "agency_name", "action_type",
"cfda_program_num", "cfda_program_title", "fed_funding_amount", "non_fed_funding_amount",
"total_funding_amount",	"asst_cat_type", "assistance_type", "record_type",
"fiscal_year", "principal_place_cc", "project_description", "recipient_name",
"recipient_type", "recip_cat_type", "recipient_city_name", "recipient_county_name",
"recipient_state_code", "exec1_fullname", "exec1_amount")]
#Only interested in pure Federal grants
x <- dat$non_fed_funding_amount == 0
dat <- roc16[x,]
#only interested in project grants
x <- dat$assistance_type == "04: Project grant"
dat <- dat[x,]
alb16 <- dat
dim(alb16)
#Subsetting for Ithaca
x <- gra16$recipient_city_name %in% c("Ithaca", "ITHACA")
dat <- gra16[x,c("maj_agency_cat", "agency_name", "action_type",
"cfda_program_num", "cfda_program_title", "fed_funding_amount", "non_fed_funding_amount",
"total_funding_amount",	"asst_cat_type", "assistance_type", "record_type",
"fiscal_year", "principal_place_cc", "project_description", "recipient_name",
"recipient_type", "recip_cat_type", "recipient_city_name", "recipient_county_name",
"recipient_state_code", "exec1_fullname", "exec1_amount")]
#Only interested in pure Federal grants
x <- dat$non_fed_funding_amount == 0
dat <- roc16[x,]
#only interested in project grants
x <- dat$assistance_type == "04: Project grant"
dat <- dat[x,]
ith16 <- dat
dim(ith16)
unique(gra16$recipient_city_name)
sort(unique(gra16$recipient_city_name))
rec <- group_by(ith16, recipient_name)
rec <- arrange(as.data.frame(summarize(rec, Fed = sum(fed_funding_amount), Freq = n())), desc(Fed))
rec
View(ith16)
#Generating subsets for 5 cities 2016 data
#Subsetting sry16
x <- gra16$recipient_city_name %in% c("Syracuse", "SYRACUSE")
dat <- gra16[x,c("maj_agency_cat", "agency_name", "action_type",
"cfda_program_num", "cfda_program_title", "fed_funding_amount", "non_fed_funding_amount",
"total_funding_amount",	"asst_cat_type", "assistance_type", "record_type",
"fiscal_year", "principal_place_cc", "project_description", "recipient_name",
"recipient_type", "recip_cat_type", "recipient_city_name", "recipient_county_name",
"recipient_state_code", "exec1_fullname", "exec1_amount")]
#Only interested in pure Federal grants
x <- dat$non_fed_funding_amount == 0
dat <- dat[x,]
#only interested in project grants
x <- dat$assistance_type == "04: Project grant"
dat <- dat[x,]
#saving it as syr16
syr16 <- dat
###########################
#Subsetting Rochester
x <- gra16$recipient_city_name %in% c("Rochester", "ROCHESTER")
dat <- gra16[x,c("maj_agency_cat", "agency_name", "action_type",
"cfda_program_num", "cfda_program_title", "fed_funding_amount", "non_fed_funding_amount",
"total_funding_amount",	"asst_cat_type", "assistance_type", "record_type",
"fiscal_year", "principal_place_cc", "project_description", "recipient_name",
"recipient_type", "recip_cat_type", "recipient_city_name", "recipient_county_name",
"recipient_state_code", "exec1_fullname", "exec1_amount")]
#Only interested in pure Federal grants
x <- dat$non_fed_funding_amount == 0
dat <- dat[x,]
#only interested in project grants
x <- dat$assistance_type == "04: Project grant"
dat <- dat[x,]
roc16 <- dat
###########################
#Subsetting for Albany
x <- gra16$recipient_city_name %in% c("Albany", "ALBANY")
dat <- gra16[x,c("maj_agency_cat", "agency_name", "action_type",
"cfda_program_num", "cfda_program_title", "fed_funding_amount", "non_fed_funding_amount",
"total_funding_amount",	"asst_cat_type", "assistance_type", "record_type",
"fiscal_year", "principal_place_cc", "project_description", "recipient_name",
"recipient_type", "recip_cat_type", "recipient_city_name", "recipient_county_name",
"recipient_state_code", "exec1_fullname", "exec1_amount")]
#Only interested in pure Federal grants
x <- dat$non_fed_funding_amount == 0
dat <- dat[x,]
#only interested in project grants
x <- dat$assistance_type == "04: Project grant"
dat <- dat[x,]
alb16 <- dat
###########################
#Subsetting for Ithaca
x <- gra16$recipient_city_name %in% c("Ithaca", "ITHACA")
dat <- gra16[x,c("maj_agency_cat", "agency_name", "action_type",
"cfda_program_num", "cfda_program_title", "fed_funding_amount", "non_fed_funding_amount",
"total_funding_amount",	"asst_cat_type", "assistance_type", "record_type",
"fiscal_year", "principal_place_cc", "project_description", "recipient_name",
"recipient_type", "recip_cat_type", "recipient_city_name", "recipient_county_name",
"recipient_state_code", "exec1_fullname", "exec1_amount")]
#Only interested in pure Federal grants
x <- dat$non_fed_funding_amount == 0
dat <- dat[x,]
#only interested in project grants
x <- dat$assistance_type == "04: Project grant"
dat <- dat[x,]
ith16 <- dat
###########################
#Subsetting for Buffalo
x <- gra16$recipient_city_name %in% c("Buffalo", "BUFFALO")
dat <- gra16[x,c("maj_agency_cat", "agency_name", "action_type",
"cfda_program_num", "cfda_program_title", "fed_funding_amount", "non_fed_funding_amount",
"total_funding_amount",	"asst_cat_type", "assistance_type", "record_type",
"fiscal_year", "principal_place_cc", "project_description", "recipient_name",
"recipient_type", "recip_cat_type", "recipient_city_name", "recipient_county_name",
"recipient_state_code", "exec1_fullname", "exec1_amount")]
#Only interested in pure Federal grants
x <- dat$non_fed_funding_amount == 0
dat <- dat[x,]
#only interested in project grants
x <- dat$assistance_type == "04: Project grant"
dat <- dat[x,]
buf16 <- dat
unique(syr16$recipient_type)
unique(syr16$recip_cat_type)
unique(gra16$recipient_type)
unique(gra16$recip_cat_type)
x <- gra16[,"c(recipient_type", "recip_cat_type)"]
x <- gra16[,c("recipient_type", "recip_cat_type")]
View(x)
group_by(x, recipient_type, recip_cat_type)
x <- group_by(x, recipient_type, recip_cat_type)
summarize(x, Freq = n())
options(scipen = 999)
rec <- group_by(syr16, recip_cat_type)
rec <- arrange(as.data.frame(summarize(rec, Fed = sum(fed_funding_amount), Freq = n())), desc(Fed))
rec
x <- rec$Fed < 0
x
rec$Fed[x] <- 0
rec <- arrange(rec, desc(Fed))
head(rec) %>% pander
rec %>% pander
par(mar = c(7,6,3,3), mfrow=c(1,1))
barplot(rec$Fed/1000000, names.arg = rec$recipient_name, las = 2, cex.names = .7, cex.axis = .7 , ylab = "in USD 1MLL", cex.lab = .8)
barplot(rec$Fed/1000000, names.arg = rec$recip_cat_type, las = 2, cex.names = .7, cex.axis = .7 , ylab = "in USD 1MLL", cex.lab = .8)
pie <- rec
pie
class(pie$Fed)
x <- data.frame(City = c("Syr", "Roc", "Buf", "Ith", "Alb"), Fed = c(sum(syr16$fed_funding_amount), sum(roc16$fed_funding_amount), sum(buf16$fed_funding_amount), sum(ith16$fed_funding_amount), sum(alb16$fed_funding_amount)))
View(x)
arrange(x,Fed)
x<- arrange(x, desc(Fed))
barplot(rec$Fed/1000000, names.arg = rec$recip_cat_type, las = 2, cex.names = .7, cex.axis = .7 , ylab = "in USD 1MLL", cex.lab = .8)
barplot(rec$Fed/1000000, names.arg = rec$recip_cat_type, las = 2, cex.names = .7, cex.axis = .7 , ylab = "in USD 1MLL", cex.lab = .8, col="#4979FF")
x <- data.frame(City = c("Syr", "Roc", "Buf", "Ith", "Alb"), Fed = c(sum(syr16$fed_funding_amount), sum(roc16$fed_funding_amount), sum(buf16$fed_funding_amount), sum(ith16$fed_funding_amount), sum(alb16$fed_funding_amount)))
x<- arrange(x, desc(Fed))
#barplot
par(mar = c(7,6,3,3), mfrow=c(1,1))
barplot(x$Fed/1000000, names.arg = x$City, las = 2, cex.names = .7, cex.axis = .7 , ylab = "in USD 1MLL", cex.lab = .8, col="#4979FF")
text("shflkdf")
text(1, "shflkdf")
text(5, "shflkdf")
text(2, "shflkdf")
text(.1, "shflkdf")
text(1, "shflkdf")
text(2, "shflkdf")
text(1000, "shflkdf")
text(1000,2, "shflkdf")
text(x=1000,y=2, "shflkdf")
text(y=1000,x=2, "shflkdf")
text(y=1000,x=3, "shflkdf")
length(x$Fed)
for (i in 1:length(x$Fed)) {
text(y=x$Fed[i]+300, x=i, x$Fed[i], cex = .7)
}
par(mar = c(7,6,3,3), mfrow=c(1,1))
barplot(x$Fed/1000000, names.arg = x$City, las = 2, cex.names = .7, cex.axis = .7 , ylab = "in USD 1MLL", cex.lab = .8, col="#4979FF")
for (i in 1:length(x$Fed)) {
text(y=x$Fed[i]+300, x=i, x$Fed[i], cex = .7)
}
for (i in 1:length(x$Fed)) {
text(y=x$Fed[i]+300, x=i, x$Fed[i], cex = .7)
}
text(y=x$Fed[1]+300, x=1, x$Fed[1], cex = .7)
par(mar = c(7,6,3,3), mfrow=c(1,1))
barplot(x$Fed/1000000, names.arg = x$City, las = 2, cex.names = .7, cex.axis = .7 , ylab = "in USD 1MLL", cex.lab = .8, col="#4979FF")
text(y=x$Fed[1]+300, x=1, x$Fed[1], cex = .7)
text(y=x$Fed[1]+300, x=1, as.character(x$Fed[1]), cex = .7)
text(y=x$Fed[1]+300, x=1, as.character(x$Fed[1]), cex = .7)
text(y=x$Fed[2]+300, x=2, as.character(x$Fed[2]), cex = .7)
x$Fed[2]+300
text(y=x$Fed[2]/1000000+300, x=2, as.character(x$Fed[2]), cex = .7)
text(y=x$Fed[2]/1000000+250, x=2, as.character(round(x$Fed[2]/1000000, digits=1)), cex = .7)
par(mar = c(7,6,3,3), mfrow=c(1,1))
barplot(x$Fed/1000000, names.arg = x$City, las = 2, cex.names = .7, cex.axis = .7 , ylab = "in USD 1MLL", cex.lab = .8, col="#4979FF")
for (i in 1:length(x$Fed)) {
text(y=x$Fed[i]/1000000+250, x=i, as.character(round(x$Fed[i]/1000000, digits=1)), cex = .7)
}
text(y=x$Fed[5]/1000000+250, x=5, as.character(round(x$Fed[5]/1000000, digits=1)), cex = .7)
length(unique(gra16$cfda_program_num))
length(unique(gra16$cfda_program_title))
sort(unique(gra16$recipient_county_code))
sort(unique(gra16$recipient_county_name))
sort(unique(gra16$recipient_state_code))
head(sort(unique(gra16$recipient_county_code)))
head(sort(unique(gra16$recipient_county_name)))
head(sort(unique(gra16$recipient_state_code)))
sort(unique(gra16$recipient_state_code))
sort(unique(gra16$recipient_city_name))
sort(unique(gra16$principal_place_cc))
sort(unique(gra16$principal_place_state))
sort(unique(gra16$principal_place_state))
sort(unique(gra16$principal_place_cc))
